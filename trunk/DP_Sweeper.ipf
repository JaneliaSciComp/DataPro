//	DataPro//	DAC/ADC macros for use with Igor Pro and the ITC-16 or ITC-18//	Nelson Spruston//	Northwestern University//	project began 10/27/1998Function SweeperViewConstructor() : Panel	// Save, set the DF	String savedDF=GetDataFolder(1)	SetDataFolder root:DP_Digitizer		NewPanel /W=(720,54,720+290,54+230) /K=1 /N=SweeperView as "Sweep Control Panel"	ModifyPanel /W=SweeperView fixedSize=1	CheckBox autoAnalyzeCheckBox,win=SweeperView,pos={180,1},size={58,14},title="Auto analyze on"	CheckBox autoAnalyzeCheckBox,win=SweeperView,variable=autoAnalyzeChecked	// Sweep Control widgets	Variable yOffset=0	GroupBox sweepControlGroup,win=SweeperView,pos={6,3},size={278,120},title="Sweep Control"	Button getDataButton,win=SweeperView,pos={19,22},size={80,20},proc=HandleGetDataButton,title="Get Data"		SetVariable iSweepSV,win=SweeperView,pos={130,25},size={100,15},title="Next sweep:"	SetVariable iSweepSV,win=SweeperView,format="%d"	SetVariable iSweepSV,win=SweeperView,limits={0,10000,1},value= iSweep		Variable xOffset=30	SetVariable nSweepsPerTrialSV,win=SweeperView,pos={13-13+xOffset,50},size={85,15},title="Sweeps:"	SetVariable nSweepsPerTrialSV,win=SweeperView,value= root:DP_Digitizer:nSweepsPerTrial, proc=SweeperSetVariableTwiddled	//TitleBox numacquireTitleBox,pos={95-13+xOffset,51+2},frame=0,title="time"		xOffset=140	SetVariable sweepIntervalSetVariable,win=SweeperView,pos={138-138+xOffset,50},size={120,15},title="Sweep interval:"	SetVariable sweepIntervalSetVariable,win=SweeperView,limits={0.1,10000,1},value= root:DP_Digitizer:sweepInterval, proc=SweeperSetVariableTwiddled	TitleBox intervalTitleBox,win=SweeperView,pos={220-138+xOffset+40,50+2},frame=0,title="s"		xOffset=70	SetVariable dtSetVariable,win=SweeperView,pos={13-13+xOffset,75},size={140,15},title="Sampling interval:"	SetVariable dtSetVariable,win=SweeperView,limits={0.001,100,0.01},value=dt, proc=SweeperSetVariableTwiddled	TitleBox dtUnitsTitleBox,win=SweeperView,pos={156-14+xOffset,75+2},frame=0,title="ms"	xOffset=70	SetVariable totalDurationSV,win=SweeperView,pos={13-13+xOffset,100},size={140,15},title="Total duration:"	SetVariable totalDurationSV,win=SweeperView,limits={10,10000,100},value=totalDuration, proc=SweeperSetVariableTwiddled	TitleBox totalDurationUnitsTitleBox,win=SweeperView,pos={156-14+xOffset,100+2},frame=0,title="ms"		// Step Pulse DAC	yOffset+=130	GroupBox stepPulseGroup,win=SweeperView,pos={6,yOffset},size={278,45},title="StepPulse_DAC"	SetVariable stepPulseAmplitudeSetVariable,win=SweeperView,pos={25,yOffset+22},size={95,15},proc=DPampProc,title="Amplitude:"	SetVariable stepPulseAmplitudeSetVariable,win=SweeperView,limits={-1000,10000,10},value= root:DP_Digitizer:stepPulseAmplitude, proc=SweeperSetVariableTwiddled	xOffset=145	SetVariable stepPulseDurationSetVariable,win=SweeperView,pos={131-131+xOffset,yOffset+22},size={100,15},proc=DPdurProc,title="Duration:"	SetVariable stepPulseDurationSetVariable,win=SweeperView,limits={1e-05,100000,100},value= root:DP_Digitizer:stepPulseDuration, proc=SweeperSetVariableTwiddled	TitleBox durationUnitsTitleBox,win=SweeperView,pos={233-131+xOffset,yOffset+22+2},frame=0,title="ms"		// Syn Pulse DAC	yOffset+=50		// baseline for the next few UI widgets	GroupBox synPulseGroup,win=SweeperView,pos={6,yOffset},size={278,45},title="SynPulse_TTL"	xOffset=20	SetVariable synPulseDelaySetVariable,win=SweeperView,pos={xOffset,yOffset+22},size={85,15},title="Delay:"	SetVariable synPulseDelaySetVariable,win=SweeperView,limits={0,1000,10},value= root:DP_Digitizer:synPulseDelay, proc=SweeperSetVariableTwiddled	TitleBox delayUnitsTitleBox,win=SweeperView,pos={xOffset+87,yOffset+22+2},frame=0,title="ms"	xOffset=140	SetVariable synPulseDurationSetVariable,win=SweeperView,pos={xOffset,yOffset+22},size={120,15},title="Pulse duration:"	SetVariable synPulseDurationSetVariable,win=SweeperView,limits={0.001,10,0.1},value= root:DP_Digitizer:synPulseDuration, proc=SweeperSetVariableTwiddled	TitleBox pulseDurationUnitsTitleBox,win=SweeperView,pos={xOffset+122,yOffset+22+2},frame=0,title="ms"		// Restore original DF	SetDataFolder savedDFEndFunction SweeperSetVariableTwiddled(ctrlName,varNum,varStr,varName) : SetVariableControl	// Callback for SetVariables that don't require any bounds checking	String ctrlName	Variable varNum	String varStr	String varName	SweeperModelChanged()EndFunction SweeperModelChanged()	StepPulseParametersChanged()	SynPulseParametersChanged()	if (DataFolderExists("root:DP_SineBuilder"))		SineBuilderModelParamsChanged()	endif	if (DataFolderExists("root:DP_PSCBuilder"))		PSCBuilderModelParamsChanged()	endif		if (DataFolderExists("root:DP_RampBuilder"))		//RampBuilderModelParamsChanged()	endif		if (DataFolderExists("root:DP_TrainBuilder"))		//TrainBuilderModelParamsChanged()	endif		if (DataFolderExists("root:DP_FiveSegmentBuilder"))		//FiveSegmentBuilderModelParamsChanged()	endif	End	